#!/usr/bin/python

import argparse
import ssl
from common import parsers


def init_ssl():
    try:
        _create_unverified_https_context = ssl._create_unverified_context
    except AttributeError:
        # Legacy Python that doesn't verify HTTPS certificates by default
        pass
    else:
        # Handle target environment that doesn't support HTTPS verification
        ssl._create_default_https_context = _create_unverified_https_context


def main():
    init_ssl()

    parser = argparse.ArgumentParser(description='CLI for VC Operations.')
    subparsers = parser.add_subparsers(help='sub-command help',
                                       dest='sub_cmd')
    parsers.assign_role_parser(subparsers)
    parsers.init_vc_parser(subparsers)
    parsers.add_dc_parser(subparsers)
    parsers.add_cluster_parser(subparsers)
    parsers.add_host_parser(subparsers)
    parsers.config_host_parser(subparsers)
    parsers.add_nfs_parser(subparsers)
    parsers.add_dvs_parser(subparsers)
    parsers.vmotion_parser(subparsers)
    parsers.config_service_parser(subparsers)
    parsers.config_rule_parser(subparsers)

    args = parser.parse_args()
    args.func(args)

if __name__ == '__main__':
    main()